window.__require=function t(e,o,i){function n(r,s){if(!o[r]){if(!e[r]){var h=r.split("/");if(h=h[h.length-1],!e[h]){var d="function"==typeof __require&&__require;if(!s&&d)return d(h,!0);if(c)return c(h,!0);throw new Error("Cannot find module '"+r+"'")}r=h}var p=o[r]={exports:{}};e[r][0].call(p.exports,function(t){return n(e[r][1][t]||t)},p,p.exports,t,e,o,i)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({Player:[function(t,e,o){"use strict";cc._RF.push(e,"598c0YnielI+oXuYNbDW+jl","Player");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,h=s.ccclass,d=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.selected=!1,e.bullet=null,e.bulletCd=.3,e.bulletType="A",e}return n(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getVisibleSize().width,this.viewHeight=cc.view.getVisibleSize().height},e.prototype.start=function(){this.addNodeListener(),this.refreshShootSchedule()},e.prototype.addNodeListener=function(){var t=this,e=this.node;e.on(cc.Node.EventType.TOUCH_START,function(){t.selected=!0},!0),e.on(cc.Node.EventType.TOUCH_END,function(){t.selected=!1},!0),e.on(cc.Node.EventType.TOUCH_MOVE,function(o){if(t.selected){var i=o.getPreviousLocation(),n=Math.min(Math.max(i.x,e.width/2),t.viewWidth-e.width/2),c=Math.min(Math.max(i.y,e.height/2),t.viewHeight-e.height/2);e.setPosition(n,c)}},!0)},e.prototype.update=function(){},e.prototype.shootSchedule=function(){this.shoot()},e.prototype.refreshShootSchedule=function(){this.unschedule(this.shootSchedule),this.schedule(this.shootSchedule,this.bulletCd)},e.prototype.shoot=function(){switch(this.bulletType){case r.BUFF_MAP.A:(n=cc.instantiate(this.bullet)).y=this.node.y,n.x=this.node.x,n.setParent(cc.director.getScene()),this.node.getComponent(cc.AudioSource).play(),this.bulletCd=.3;break;case r.BUFF_MAP.K:(n=cc.instantiate(this.bullet)).scale=3,n.getComponent("bullet").isSuper=!0,n.y=this.node.y,n.x=this.node.x-(3*n.width/2-3),n.setParent(cc.director.getScene()),this.node.getComponent(cc.AudioSource).play(),this.bulletCd=.3;break;case r.BUFF_MAP.B:for(var t=cc.instantiate(this.bullet),e=Math.floor(5*(t.width+10)/2)+10-2,o=1;o<=5;o++){var i=cc.instantiate(this.bullet);i.y=this.node.y,i.x=this.node.x+o*(i.width+10)-e,i.setParent(cc.director.getScene()),this.node.getComponent(cc.AudioSource).play()}this.bulletCd=.3;break;case r.BUFF_MAP.S:case r.BUFF_MAP.L:var n;(n=cc.instantiate(this.bullet)).y=this.node.y,n.x=this.node.x,n.setParent(cc.director.getScene()),this.node.getComponent(cc.AudioSource).play(),this.bulletCd=.1}},e.prototype.setBuff=function(t){var e=this;this.bulletType=t,this.scheduleOnce(function(){e.refreshShootSchedule()},.3)},e.prototype.onCollisionEnter=function(t){if(2==t.tag&&t.node.getComponent("enemy").blood>0&&(console.log("game over"),cc.game.pause()),99==t.tag){var e=t.node.getComponent(cc.Label).string;t.node.destroy(),this.setBuff(e)}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},c([d(cc.Prefab)],e.prototype,"bullet",void 0),c([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./comm":"comm"}],bg:[function(t,e,o){"use strict";cc._RF.push(e,"9a50cLFnVJC0KvNzsP8BzPs","bg");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,h=s.ccclass,d=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.bgs=[],e.topBg=null,e.speed=303.4,e.enemy=null,e.scoreLable=null,e.buff=null,e.scoreNum=0,e.addEnemySpeed=1.5,e}return n(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getVisibleSize().width,this.viewHeight=cc.view.getVisibleSize().height,this.bgs=this.node.children,this.topBg=this.bgs[this.bgs.length-1],cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){var t=this;this.schedule(function(){t.addEnemy()},this.addEnemySpeed),this.node.on(r.CUSTOM_EVENT.ADD_SCORE,function(e){var o=e.detail;t.scoreNum+=o.score,t.scoreLable.string="\u5f97\u5206\uff1a"+t.scoreNum}),this.node.on(r.CUSTOM_EVENT.GET_BUFF,function(e){var o=e.detail;t.addBuff(o)})},e.prototype.addBuff=function(t){var e=t.x,o=t.y;if(r.getProbability(20)){var i=cc.instantiate(this.buff);i.y=o+i.height/2,i.x=e+i.width/2,i.setParent(cc.director.getScene())}},e.prototype.update=function(t){var e=this;this.bgs.forEach(function(o){o.y-=e.speed*t,o.y<=-o.height&&(o.y=e.topBg.y+o.height-e.speed*t,e.topBg=o)})},e.prototype.addEnemy=function(){var t=cc.instantiate(this.enemy);t.y=this.viewHeight,t.x=r.randomNum(0,this.viewWidth-t.width),t.setParent(cc.director.getScene())},c([d(cc.Prefab)],e.prototype,"enemy",void 0),c([d(cc.Label)],e.prototype,"scoreLable",void 0),c([d(cc.Prefab)],e.prototype,"buff",void 0),c([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./comm":"comm"}],blood:[function(t,e,o){"use strict";cc._RF.push(e,"ced9e2ZiHBHoJ4s/DmSMXBN","blood");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,h=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.buckleBlood=function(t){void 0===t&&(t=1),this.node.getChildByName("blood").getComponent(cc.Sprite).fillRange=t},c([s],e)}(cc.Component));o.default=h,cc._RF.pop()},{}],buff:[function(t,e,o){"use strict";cc._RF.push(e,"a82bewFtvJF0IP4FXpli667","buff");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,h=s.ccclass,d=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.buffType="B",e.speed=30,e.speedX=15,e.isLeft=!1,e}return n(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getVisibleSize().width,this.viewHeight=cc.view.getVisibleSize().height,this.getRandomBuff(),this.isLeft=this.node.x>this.viewWidth/2},e.prototype.start=function(){},e.prototype.update=function(t){this.node.y-=this.speed*t,this.node.x-=this.speedX*t*(this.isLeft?1:-1),(this.node.y<=-this.viewHeight-this.node.height||this.node.x<=-this.node.width||this.node.x>=this.viewWidth+this.node.width)&&this.node.destroy()},e.prototype.getRandomBuff=function(){var t=Object.keys(r.BUFF_MAP),e=r.randomNum(1,t.length);this.buffType=t[e],this.node.getComponent(cc.Label).string=this.buffType},c([h],e)}(cc.Component));o.default=d,cc._RF.pop()},{"./comm":"comm"}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"88c79rVd+dNP6Oq4jED7kg5","bullet");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,h=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.bulletSpeed=200,e.isDie=!1,e.isSuper=!1,e}return n(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getVisibleSize().width,this.viewHeight=cc.view.getVisibleSize().height},e.prototype.start=function(){},e.prototype.update=function(t){this.isDie||(this.node.angle,Math.PI,this.node.y+=this.bulletSpeed*t,(this.node.y>=this.viewHeight||this.node.x<=-this.node.width||this.node.x>=this.viewWidth+this.node.width)&&this.node.destroy())},e.prototype.onCollisionEnter=function(t){var e=this;if(2==t.tag){if(t.node.getComponent(cc.Animation).getAnimationState("enemyDie").isPlaying||this.isSuper)return;var o=this.node.getComponent(cc.AudioSource);o.play(),this.isDie=!0,this.node.opacity=0,this.schedule(function(){e.die()},o.getDuration(),1)}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},e.prototype.die=function(){this.node.destroy()},c([s],e)}(cc.Component));o.default=h,cc._RF.pop()},{}],comm:[function(t,e,o){"use strict";cc._RF.push(e,"513d6Zo9RVIU4XbODEuTEjh","comm");var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<o;e++)for(var c=arguments[e],r=0,s=c.length;r<s;r++,n++)i[n]=c[r];return i};function n(t,e){return Math.floor(Math.random()*(e-t))+t}Object.defineProperty(o,"__esModule",{value:!0}),o.getProbability=o.randomNum=o.BUFF_MAP=o.CUSTOM_EVENT=void 0,o.CUSTOM_EVENT={ADD_SCORE:"ADD_SCORE",GAME_OVER:"GAME_OVER",GET_BUFF:"GET_BUFF"},o.BUFF_MAP={A:"A",L:"L",B:"B",K:"K",S:"S"},o.randomNum=n,o.getProbability=function(t){return i(Array(100-t).fill(!1),Array(t).fill(!0))[Math.floor(n(0,99))]},cc._RF.pop()},{}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"df6b7kwpGxOLa6dYEmj5IMF","enemy");var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,i){var n,c=arguments.length,r=c<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(c<3?n(r):c>3?n(e,o,r):n(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,h=s.ccclass,d=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.moveSpeed=50,e.maxBlood=5,e.blood=e.maxBlood,e.bloodIns=null,e.bloodStatic=null,e.addScore=null,e}return n(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getVisibleSize().width,this.viewHeight=cc.view.getVisibleSize().height},e.prototype.start=function(){this.addScore=new cc.Event.EventCustom(r.CUSTOM_EVENT.ADD_SCORE,!0),this.addScore.detail={score:1},this.addBlood()},e.prototype.update=function(t){this.node.y-=this.moveSpeed*t,this.node.y<=-this.viewHeight-this.node.height&&this.node.destroy()},e.prototype.addBlood=function(){this.bloodIns=cc.instantiate(this.bloodStatic),this.bloodIns.y=this.node.height+5,this.bloodIns.x=this.node.width/2,this.bloodIns.setParent(this.node)},e.prototype.buckleBlood=function(t){var e=this;void 0===t&&(t=1),this.node.color=new cc.color(161,161,161,255),this.schedule(function(){e.node.color=new cc.color(255,255,255,255)},.1,1),this.blood-=t;var o=(this.blood/this.maxBlood).toFixed(3);this.bloodIns.getComponent("blood").buckleBlood(o)},e.prototype.onCollisionEnter=function(t){if(1==t.tag){if(this.blood<=0)return;this.buckleBlood(),this.blood<=0&&this.die()}},e.prototype.die=function(){var t=this,e=this.node.getComponent(cc.Animation).play("enemyDie");this.schedule(function(){var e=new cc.Event.EventCustom(r.CUSTOM_EVENT.GET_BUFF,!0);e.detail={x:t.node.x,y:t.node.y},cc.find("Background").dispatchEvent(e),t.node.destroy()},e.duration,1),this.bloodIns.opacity=0,cc.find("Background").dispatchEvent(this.addScore),this.node.getComponent(cc.AudioSource).play()},c([d(cc.Prefab)],e.prototype,"bloodStatic",void 0),c([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./comm":"comm"}]},{},["Player","bg","blood","buff","bullet","comm","enemy"]);