window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var p=r.split("/");if(p=p[p.length-1],!e[p]){var u="function"==typeof __require&&__require;if(!s&&u)return u(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+r+"'")}r=p}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return i(e[r][1][t]||t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({Player:[function(t,e,o){"use strict";cc._RF.push(e,"598c0YnielI+oXuYNbDW+jl","Player");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,p=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.selected=!1,e.bullet=null,e.bulletCd=.5,e}return i(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getCanvasSize().width,this.viewHeight=cc.view.getCanvasSize().height},e.prototype.start=function(){var t=this;this.addNodeListener(),this.schedule(function(){t.shoot()},this.bulletCd)},e.prototype.addNodeListener=function(){var t=this,e=this.node;e.on(cc.Node.EventType.TOUCH_START,function(){t.selected=!0},!0),e.on(cc.Node.EventType.TOUCH_END,function(){t.selected=!1},!0),e.on(cc.Node.EventType.TOUCH_MOVE,function(o){if(t.selected){var n=o.getPreviousLocation(),i=Math.min(Math.max(n.x,e.width/2),t.viewWidth-e.width/2),c=Math.min(Math.max(n.y,e.height/2),t.viewHeight-e.height/2);e.setPosition(i,c)}},!0)},e.prototype.update=function(){},e.prototype.shoot=function(){var t=cc.instantiate(this.bullet);t.y=this.node.y,t.x=this.node.x,t.setParent(cc.director.getScene()),this.node.getComponent(cc.AudioSource).play()},e.prototype.onCollisionEnter=function(t){2==t.tag&&t.node.getComponent("enemy").blood>0&&(console.log("game over"),cc.game.pause())},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},c([p(cc.Prefab)],e.prototype,"bullet",void 0),c([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],bg:[function(t,e,o){"use strict";cc._RF.push(e,"9a50cLFnVJC0KvNzsP8BzPs","bg");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.bgs=[],e.topBg=null,e.speed=133.4,e.enemy=null,e.scoreLable=null,e.scoreNum=0,e.addEnemySpeed=2,e}return i(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getCanvasSize().width,this.viewHeight=cc.view.getCanvasSize().height,this.bgs=this.node.children,this.topBg=this.bgs[this.bgs.length-1],cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){var t=this;this.schedule(function(){t.addEnemy()},this.addEnemySpeed),this.node.on(r.CUSTOM_EVENT.ADD_SCORE,function(e){var o=e.detail;t.scoreNum+=o.score,t.scoreLable.string="\u5f97\u5206\uff1a"+t.scoreNum})},e.prototype.update=function(t){var e=this;this.bgs.forEach(function(o){o.y-=e.speed*t,o.y<=-o.height&&(o.y=e.topBg.y+o.height-e.speed*t,e.topBg=o)})},e.prototype.addEnemy=function(){var t=cc.instantiate(this.enemy);t.y=this.viewHeight,t.x=r.randomNum(0,this.viewWidth-t.width),t.setParent(cc.director.getScene())},c([u],e.prototype,"speed",void 0),c([u(cc.Prefab)],e.prototype,"enemy",void 0),c([u(cc.Label)],e.prototype,"scoreLable",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./comm":"comm"}],blood:[function(t,e,o){"use strict";cc._RF.push(e,"ced9e2ZiHBHoJ4s/DmSMXBN","blood");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,p=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.buckleBlood=function(t){void 0===t&&(t=1),this.node.getChildByName("blood").getComponent(cc.Sprite).fillRange=t},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"88c79rVd+dNP6Oq4jED7kg5","bullet");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,p=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.bulletSpeed=200,e.isDie=!1,e}return i(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getCanvasSize().width,this.viewHeight=cc.view.getCanvasSize().height},e.prototype.start=function(){},e.prototype.update=function(t){this.isDie||(this.node.y+=this.bulletSpeed*t,this.node.y>=this.viewHeight&&this.node.destroy())},e.prototype.onCollisionEnter=function(t){var e=this;if(2==t.tag){var o=this.node.getComponent(cc.AudioSource);o.play(),this.isDie=!0,this.node.opacity=0,this.schedule(function(){e.die()},o.getDuration(),1)}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},e.prototype.die=function(){this.node.destroy()},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],comm:[function(t,e,o){"use strict";cc._RF.push(e,"513d6Zo9RVIU4XbODEuTEjh","comm"),Object.defineProperty(o,"__esModule",{value:!0}),o.randomNum=o.CUSTOM_EVENT=void 0,o.CUSTOM_EVENT={ADD_SCORE:"ADD_SCORE",GAME_OVER:"GAME_OVER"},o.randomNum=function(t,e){return Math.floor(Math.random()*(e-t))+t},cc._RF.pop()},{}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"df6b7kwpGxOLa6dYEmj5IMF","enemy");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./comm"),s=cc._decorator,p=s.ccclass,u=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewWidth=375,e.viewHeight=667,e.moveSpeed=50,e.maxBlood=3,e.blood=e.maxBlood,e.bloodIns=null,e.bloodStatic=null,e.addScore=null,e}return i(e,t),e.prototype.onLoad=function(){this.viewWidth=cc.view.getCanvasSize().width,this.viewHeight=cc.view.getCanvasSize().height},e.prototype.start=function(){this.addScore=new cc.Event.EventCustom(r.CUSTOM_EVENT.ADD_SCORE,!0),this.addScore.detail={score:1},this.addBlood()},e.prototype.update=function(t){this.node.y-=this.moveSpeed*t,this.node.y<=-this.viewHeight-this.node.height&&this.node.destroy()},e.prototype.addBlood=function(){this.bloodIns=cc.instantiate(this.bloodStatic),this.bloodIns.y=this.node.height+5,this.bloodIns.x=this.node.width/2,this.bloodIns.setParent(this.node)},e.prototype.buckleBlood=function(t){var e=this;void 0===t&&(t=1),this.node.color=new cc.color(161,161,161,255),this.schedule(function(){e.node.color=new cc.color(255,255,255,255)},.1,1),this.blood-=t;var o=(this.blood/this.maxBlood).toFixed(3);this.bloodIns.getComponent("blood").buckleBlood(o)},e.prototype.onCollisionEnter=function(t){if(1==t.tag){if(this.blood<=0)return;this.buckleBlood(),this.blood<=0&&this.die()}},e.prototype.die=function(){var t=this,e=this.node.getComponent(cc.Animation).play("enemyDie");this.schedule(function(){t.node.destroy()},e.duration,1),this.bloodIns.opacity=0,cc.find("Background").dispatchEvent(this.addScore),this.node.getComponent(cc.AudioSource).play()},c([u(cc.Prefab)],e.prototype,"bloodStatic",void 0),c([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./comm":"comm"}]},{},["Player","bg","blood","bullet","comm","enemy"]);